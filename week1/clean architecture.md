# 클린 아키텍처

톰 홈버그의 '만들면서 배우는 클린 아키텍처' 4장까지의 내용 중 인상 깊은 내용을 담았습니다.

계층형 아키텍처의 문제

- `웹 -> 도메인 -> 영속성`

1. 데이터베이스 주도 설계를 유도한다.
2. 지름길을 택하기 쉬워진다.
3. 테스트하기 어려워진다.
4. 유스케이스를 숨긴다.
5. 동시 작업이 어려워진다.

위 해결하기 위해 `의존성 역전`을 사용

- 계층간 인터페이스를 도입함으로써 의존성을 역전!

## 그래서 클린 아키텍처란?

> 설계가 비즈니스 규칙의 테스트를 용이하게 하고, 비즈니스 규칙은 프레임워크, 데이터베이스, UI 기술, 그 밖의 외부 애플리케이션이나 인터페이스로부터 독립적일 수 있다.

![image](https://github.com/geulsseundang/season1/assets/44438366/5b8e6c02-6fb5-4015-a471-3b4dc451c182)

- 의존성 역전 원칙의 도움을으로 모든 의존성이 도메인 코드를 향하고 있다.

## 육각형 아케틱처(헥사고날 아키텍처)

클린 아키텍처에서 좀 더 일반적인 용어로 설명한 것과 동일한 원칙을 적용한다.

![image](https://github.com/geulsseundang/season1/assets/44438366/8d4a0cbf-038d-4958-9898-99b1bb89e05e)

애플리케이션 코어가 각 어댑터와 상호작용하기 위해 특정 포트를 제공하기 떄문에 포트와 어댑터 아키텍처라고도 불린다.

특징

- 어댑터와 연결되는 4개 이상의 면을 가질 수 있음을 보여주기 위해 육각형 사용. n각형이여도 상관없음
- 모든 의존성은 코어를 향한다.
- 애플리케이션 코어와 어댑터들 간 통신이 가능하려면 포트를 제공해야 한다.
- 계층형으로 구성할 땐
  - 어댑터
  - 포트 + 유스케이스
  - 도메인

### 정리

> 클린 아키텍처, 육각형 아키텍처, 포트와 어댑터 아키텍처 중 무엇으로 불리든
>
> **의존성을 역전**시켜 도메인 코드가 다른 바깥쪽 코드에 의존하지 않게 함으로써
>
> 영속성과 UI 에 특화된 모든 문제로부터 **도메인 로직의 결합을 제거**하고,
> **코드를 변경할 이유의 수를 줄**일 수 있다.
>
> **변경할 이유가 적을수록 유지보수성은 더 좋아진다**.

## 유스케이스

유스케이스에서 입력 유효성 검증과 비즈니스 규칙을 검증한다.

| -         | 입력 유효성 검증                 | 비즈니스 규칙                  |
| --------- | -------------------------------- | ------------------------------ |
| 구분점    | 도메인 모델의 현재 상태에 접근 X | 도메인 모델의 현재 상태에 접근 |
| 난이도    | 선언적으로 구현                  | 맥락이 필요                    |
| 구현 위치 | 생성자                           | 도메인 엔티티                  |

- 유스케이스마다 다른 출력 모델을 사용.
  - (단일 책임 원칙) + 모델 분리 = 유스케이스 결합 제거

다음 주엔 4장 이후 내용을 가져오겠습니다.
