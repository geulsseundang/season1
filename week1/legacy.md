# 레거시 코드 개선기

작년 7월 경 팀에 정식으로 배치를 받고 약 3개월 간의 기간동안 주어졌던 온보딩 과제이자, 사실상 첫 업무였던 사내 레거시 코드를 개선했던 경험을 공유하려고 합니다.

제가 배치되었던 팀은 TF라는 특성 상, 한정적인 리소스로 짧은 주기 안에 많은 기능을 만들어내야하는 어려움을 가진 상태였습니다. 따라서 개발자 리소스가 부족했기에 외주 인력을 통해 작성되어 퀄리티가 떨어지는 코드가 다수 존재했습니다.

이런 상황에서 저는 로그인 / 회원가입 / 프로필 생성 등과 같이 앱에 존재하는 모든 인증과 관련된 코드를 개선하는 업무를 받게 되었습니다.   

## AS-IS 분석

개선된 코드를 작성하기에 앞서, 먼저 **우리 서비스의 요구사항을 이해하고 이 요구사항을 현재 프로젝트에서 어떻게 만족시키고 있는 지를 파악하는 것**이 선행되어야 했습니다.

사실 처음에는 클라이언트 단에서 인증과 관련된 코드들이 많아봤자 얼마나 많겠어? 하는 생각을 가지고 있었으나 다소 안일한 생각이었음을 머지않아 알게 되었습니다.

비즈니스 레벨의 앱에서는 단순히 정확한 아이디와 비밀번호를 입력해서 로그인을 성공하는 것 외에도 `서드 파티 로그인`, `캡챠`, `약관`, `제재 유저 처리` 등 고려해야 할 동선이 많았습니다. 본 개선 프로젝트 초기에 들었던 조언 중 ‘인증 관련 개발은 정확한 아이디 비밀번호를 입력한 모범 유저를 들여보내는 것보다 적합하지 않은 유저를 걸러내는 것이 더 초점이 된다’ 라는 말이 기억에 남는데, 프로젝트를 진행하며 그 말에 공감을 많이 했던 것 같습니다.

~~ 여기서부터는 어떻게 쓸지 러프하게 정리 ~~

### 시퀀스 다이어그램을 통한 흐름 파악

- 처음으로 다른 사람의 코드를 보면서 느꼈던 어려움
- 추가로 내가 남의 코드를 문서화(시퀀스 다이어그램)하는 과정에서 느꼈던 어려움
- 시퀀스 다이어그램은 어떤 방식으로 그려야 좋을지? (모두가 이해할 수 있는 유의미한 자료가 될지?)

### 개선점 도출

- 시퀀스 다이어그램을 통해 현 구조에서 어떤 문제점을 느꼈고,
- 단순한 로직 상의 비효율 외에도 코드 작성 스타일에서 어떤 문제점을 느꼈는지 기술

## 2. TO-BE 설계

### 개선에 앞서, 이 과제를 통해 얻고자 했던 개인적인 성취에 대한 생각

어떤 기술적인 도전을 하고 싶었는지? 

### 개선 구조

- 개선 구조 간단히 써머리하여 서두에 언급하고, 왜 그렇게 했는지 작성하고 뒤에서 상세히 언급
- 시퀀스 다이어그램, 클래스 다이어그램 예시
- 에러 처리 공통화
- 기타 등등

## 3. 잘한 점 / 아쉬웠던 점